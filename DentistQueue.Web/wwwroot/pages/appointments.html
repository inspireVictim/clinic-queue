<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ú–æ–∏ –∑–∞–ø–∏—Å–∏ - DentistQueue</title>
    <link href="../main.css" rel="stylesheet" />
    <link href="../app.css" rel="stylesheet" />
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#1976d2">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="../index.html" class="brand-link">
                        <span class="brand-icon">ü¶∑</span>
                        <span class="brand-text">DentistQueue</span>
                    </a>
                </div>
                <div class="nav-menu" id="nav-menu">
                    <a href="../index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
                    <a href="search.html" class="nav-link">–ü–æ–∏—Å–∫ –≤—Ä–∞—á–µ–π</a>
                    <a href="appointments.html" class="nav-link active">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</a>
                    <a href="about.html" class="nav-link">–û —Å–µ—Ä–≤–∏—Å–µ</a>
                    <a href="contact.html" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
                </div>
                <div class="nav-auth" id="nav-auth">
                    <span id="user-greeting" style="display: none;">–ü—Ä–∏–≤–µ—Ç, <span id="user-name"></span>!</span>
                    <a href="login.html" class="btn btn-outline" id="login-btn">–í–æ–π—Ç–∏</a>
                    <button class="btn btn-outline" id="logout-btn" style="display: none;">–í—ã–π—Ç–∏</button>
                </div>
                <div class="nav-toggle" id="nav-toggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </nav>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <main class="main-content">
            <section class="appointments-section">
                <div class="container">
                    <div class="page-header">
                        <h1 class="page-title">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</h1>
                        <p class="page-subtitle">–£–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ –∑–∞–ø–∏—Å—è–º–∏ –∫ –≤—Ä–∞—á–∞–º</p>
                    </div>
                    
                    <!-- –§–∏–ª—å—Ç—Ä—ã -->
                    <div class="appointments-filters">
                        <div class="filter-tabs">
                            <button class="filter-tab active" data-status="all">–í—Å–µ –∑–∞–ø–∏—Å–∏</button>
                            <button class="filter-tab" data-status="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ</button>
                            <button class="filter-tab" data-status="completed">–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ</button>
                            <button class="filter-tab" data-status="cancelled">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ</button>
                        </div>
                    </div>
                    
                    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π -->
                    <div class="appointments-list" id="appointments-list">
                        <!-- –ó–∞–ø–∏—Å–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                        <div class="no-appointments" id="no-appointments" style="display: none;">
                            <div class="no-appointments-content">
                                <div class="no-appointments-icon">üìÖ</div>
                                <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π</h3>
                                <p>–ù–∞–π–¥–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –≤—Ä–∞—á–∞ –∏ –∑–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–∏–µ–º</p>
                                <a href="search.html" class="btn btn-primary">–ù–∞–π—Ç–∏ –≤—Ä–∞—á–∞</a>
                            </div>
                        </div>
                        
                        <div class="login-required" id="login-required">
                            <div class="login-required-content">
                                <div class="login-required-icon">üîí</div>
                                <h3>–í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
                                <p>–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤–∞—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç</p>
                                <a href="login.html" class="btn btn-primary">–í–æ–π—Ç–∏</a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- –§—É—Ç–µ—Ä -->
        <footer class="footer">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-section">
                        <div class="footer-brand">
                            <span class="brand-icon">ü¶∑</span>
                            <span class="brand-text">DentistQueue</span>
                        </div>
                        <p class="footer-description">–°–µ—Ä–≤–∏—Å –æ–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å–∏ –∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∞–º. –ú—ã –ø–æ–º–æ–≥–∞–µ–º –Ω–∞–π—Ç–∏ –ª—É—á—à–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–∏–µ–º –±—ã—Å—Ç—Ä–æ –∏ —É–¥–æ–±–Ω–æ.</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4 class="footer-title">–°–µ—Ä–≤–∏—Å</h4>
                        <ul class="footer-links">
                            <li><a href="search.html">–ü–æ–∏—Å–∫ –≤—Ä–∞—á–µ–π</a></li>
                            <li><a href="appointments.html">–ú–æ–∏ –∑–∞–ø–∏—Å–∏</a></li>
                            <li><a href="about.html">–û —Å–µ—Ä–≤–∏—Å–µ</a></li>
                            <li><a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4 class="footer-title">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h4>
                        <ul class="footer-links">
                            <li><a href="mailto:support@dentistqueue.com">üìß support@dentistqueue.com</a></li>
                            <li><a href="tel:+996504876087">üìû +996 504 87 60 87</a></li>
                            <li><a href="#">‚ùì –ü–æ–º–æ—â—å</a></li>
                            <li><a href="#">üìã FAQ</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4 class="footer-title">–ü—Ä–∞–≤–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>
                        <ul class="footer-links">
                            <li><a href="#">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</a></li>
                            <li><a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a></li>
                            <li><a href="#">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a></li>
                            <li><a href="#">–í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <div class="footer-bottom-content">
                        <p>&copy; 2024 DentistQueue. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                        <div class="footer-bottom-links">
                            <a href="#">–ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞</a>
                            <a href="#">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º</a>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="notifications-container" class="notifications-container"></div>

    <script src="../js/app.js"></script>
    <script>
        // –õ–æ–≥–∏–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–ø–∏—Å–µ–π
        document.addEventListener('DOMContentLoaded', function() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
            const appointmentsList = document.getElementById('appointments-list');
            const noAppointments = document.getElementById('no-appointments');
            const loginRequired = document.getElementById('login-required');
            const userGreeting = document.getElementById('user-greeting');
            const userName = document.getElementById('user-name');
            const loginBtn = document.getElementById('login-btn');
            const logoutBtn = document.getElementById('logout-btn');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            if (currentUser) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                loginRequired.style.display = 'none';
                userName.textContent = currentUser.name;
                userGreeting.style.display = 'inline';
                loginBtn.style.display = 'none';
                logoutBtn.style.display = 'inline-block';
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–ø–∏—Å–∏
                loadAppointments();
            } else {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                noAppointments.style.display = 'none';
                loginRequired.style.display = 'block';
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞
            logoutBtn.addEventListener('click', function() {
                localStorage.removeItem('currentUser');
                window.location.reload();
            });
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤
            const filterTabs = document.querySelectorAll('.filter-tab');
            filterTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    filterTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const status = this.dataset.status;
                    filterAppointments(status);
                });
            });
            
            function loadAppointments() {
                // Mock –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–µ–π
                const mockAppointments = [
                    {
                        id: 1,
                        doctorName: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á',
                        specialization: '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥-—Ç–µ—Ä–∞–ø–µ–≤—Ç',
                        clinic: '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—è "–£–ª—ã–±–∫–∞"',
                        date: '2024-10-15',
                        time: '10:00',
                        status: 'confirmed',
                        service: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è',
                        price: 1500
                    },
                    {
                        id: 2,
                        doctorName: '–ü–µ—Ç—Ä–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞',
                        specialization: '–°—Ç–æ–º–∞—Ç–æ–ª–æ–≥-—Ö–∏—Ä—É—Ä–≥',
                        clinic: '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π —Ü–µ–Ω—Ç—Ä "–ó–¥–æ—Ä–æ–≤—å–µ"',
                        date: '2024-10-20',
                        time: '14:00',
                        status: 'upcoming',
                        service: '–£–¥–∞–ª–µ–Ω–∏–µ –∑—É–±–∞',
                        price: 2000
                    }
                ];
                
                if (mockAppointments.length === 0) {
                    noAppointments.style.display = 'block';
                } else {
                    renderAppointments(mockAppointments);
                }
            }
            
            function renderAppointments(appointments) {
                appointmentsList.innerHTML = appointments.map(appointment => `
                    <div class="appointment-card" data-status="${appointment.status}">
                        <div class="appointment-header">
                            <div class="appointment-info">
                                <h3 class="appointment-doctor">${appointment.doctorName}</h3>
                                <p class="appointment-specialization">${appointment.specialization}</p>
                                <p class="appointment-clinic">${appointment.clinic}</p>
                            </div>
                            <div class="appointment-status status-${appointment.status}">
                                ${getStatusText(appointment.status)}
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="appointment-date">
                                <span class="detail-label">–î–∞—Ç–∞:</span>
                                <span class="detail-value">${formatDate(appointment.date)}</span>
                            </div>
                            <div class="appointment-time">
                                <span class="detail-label">–í—Ä–µ–º—è:</span>
                                <span class="detail-value">${appointment.time}</span>
                            </div>
                            <div class="appointment-service">
                                <span class="detail-label">–£—Å–ª—É–≥–∞:</span>
                                <span class="detail-value">${appointment.service}</span>
                            </div>
                            <div class="appointment-price">
                                <span class="detail-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                                <span class="detail-value">${appointment.price} ‚ÇΩ</span>
                            </div>
                        </div>
                        <div class="appointment-actions">
                            ${appointment.status === 'upcoming' ? `
                                <button class="btn btn-outline btn-sm" onclick="cancelAppointment(${appointment.id})">–û—Ç–º–µ–Ω–∏—Ç—å</button>
                                <button class="btn btn-primary btn-sm" onclick="rescheduleAppointment(${appointment.id})">–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏</button>
                            ` : ''}
                            <button class="btn btn-outline btn-sm" onclick="viewAppointmentDetails(${appointment.id})">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
                        </div>
                    </div>
                `).join('');
            }
            
            function getStatusText(status) {
                const statusMap = {
                    'confirmed': '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞',
                    'upcoming': '–ü—Ä–µ–¥—Å—Ç–æ—è—â–∞—è',
                    'completed': '–ó–∞–≤–µ—Ä—à–µ–Ω–∞',
                    'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–∞'
                };
                return statusMap[status] || status;
            }
            
            function formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
            }
            
            function filterAppointments(status) {
                const cards = document.querySelectorAll('.appointment-card');
                cards.forEach(card => {
                    if (status === 'all' || card.dataset.status === status) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            }
            
            // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
            window.cancelAppointment = function(id) {
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å?')) {
                    alert('–ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞');
                    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ—Ç–º–µ–Ω—ã
                }
            };
            
            window.rescheduleAppointment = function(id) {
                alert('–§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∑–∞–ø–∏—Å–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
            };
            
            window.viewAppointmentDetails = function(id) {
                alert('–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–∏—Å–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–π –≤–µ—Ä—Å–∏–∏');
            };
        });
    </script>
</body>
</html>
